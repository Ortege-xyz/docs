<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.552">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Ortege - Bitcoin</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../..//images/favicon.png" rel="icon" type="image/png">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles/custom-style.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Ortege</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-ortege-studio" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Ortege Studio</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-ortege-studio">    
        <li>
    <a class="dropdown-item" href="../../../content/studio/overview.html">
 <span class="dropdown-text">Overview</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../content/studio/dashboards.html">
 <span class="dropdown-text">Dashboards</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../content/studio/charts.html">
 <span class="dropdown-text">Charts</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../content/studio/datasets.html">
 <span class="dropdown-text">Datasets</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../content/studio/sqllab.html">
 <span class="dropdown-text">SQL LAB</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../content/studio/dbconnections.html">
 <span class="dropdown-text">Database Connections</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-ortege-lakehouse" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Ortege Lakehouse</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-ortege-lakehouse">    
        <li>
    <a class="dropdown-item" href="../../../content/lakehouse/overview.html">
 <span class="dropdown-text">Overview</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../content/lakehouse/medallian.html">
 <span class="dropdown-text">Medallian Architecture</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../content/lakehouse/api.html">
 <span class="dropdown-text">API</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-datasets" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Datasets</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-datasets">    
        <li>
    <a class="dropdown-item" href="../../../content/lakehouse/datasets/stacks.html">
 <span class="dropdown-text">Stacks</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../content/lakehouse/datasets/bitcoin.html">
 <span class="dropdown-text">Bitcoin</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../content/lakehouse/datasets/stellar.html">
 <span class="dropdown-text">Stellar</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../content/lakehouse/datasets/pricing.html">
 <span class="dropdown-text">Pricing</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../content/lakehouse/datasets/address_book.html">
 <span class="dropdown-text">Address Book</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-ortegegpt" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">OrtegeGPT</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-ortegegpt">    
        <li>
    <a class="dropdown-item" href="../../../content/ortegegpt/overview.html">
 <span class="dropdown-text">Overview</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#bronze-layer" id="toc-bronze-layer" class="nav-link active" data-scroll-target="#bronze-layer">Bronze layer</a>
  <ul class="collapse">
  <li><a href="#blocks" id="toc-blocks" class="nav-link" data-scroll-target="#blocks">Blocks</a></li>
  <li><a href="#transactions" id="toc-transactions" class="nav-link" data-scroll-target="#transactions">Transactions</a></li>
  </ul></li>
  <li><a href="#silver-layer" id="toc-silver-layer" class="nav-link" data-scroll-target="#silver-layer">Silver layer</a>
  <ul class="collapse">
  <li><a href="#base-tables" id="toc-base-tables" class="nav-link" data-scroll-target="#base-tables">Base tables</a>
  <ul class="collapse">
  <li><a href="#outputs" id="toc-outputs" class="nav-link" data-scroll-target="#outputs">Outputs</a></li>
  <li><a href="#inputs" id="toc-inputs" class="nav-link" data-scroll-target="#inputs">Inputs</a></li>
  </ul></li>
  <li><a href="#wallet-transactions" id="toc-wallet-transactions" class="nav-link" data-scroll-target="#wallet-transactions">Wallet transactions</a></li>
  <li><a href="#layer-2s" id="toc-layer-2s" class="nav-link" data-scroll-target="#layer-2s">Layer 2’s</a>
  <ul class="collapse">
  <li><a href="#stacks" id="toc-stacks" class="nav-link" data-scroll-target="#stacks">Stacks</a></li>
  <li><a href="#stacks-rewards" id="toc-stacks-rewards" class="nav-link" data-scroll-target="#stacks-rewards">Stacks Rewards</a></li>
  </ul></li>
  <li><a href="#metaprotocols" id="toc-metaprotocols" class="nav-link" data-scroll-target="#metaprotocols">MetaProtocols</a>
  <ul class="collapse">
  <li><a href="#ordinals" id="toc-ordinals" class="nav-link" data-scroll-target="#ordinals">Ordinals</a></li>
  <li><a href="#brc20s" id="toc-brc20s" class="nav-link" data-scroll-target="#brc20s">BRC20’s</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Bitcoin</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><strong>db_btc</strong></p>
<section id="bronze-layer" class="level1">
<h1>Bronze layer</h1>
<p>The raw Bitcoin tables</p>
<section id="blocks" class="level2">
<h2 class="anchored" data-anchor-id="blocks">Blocks</h2>
<p><strong>tbl_prod_br_blocks</strong> This table encapsulates comprehensive details on Bitcoin blocks, encompassing mining data, block identification, and transaction specifics. It records the difficulty level, mining rewards, the unique hash identifying each block, its position within the blockchain, and the Merkle root for transaction integrity verification. Additionally, it includes metrics such as the block’s size, the total number of transactions it contains, and the cumulative work or “chainwork” up to that point, expressed in hexadecimal. This table not only provides insights into the mining process, including the nonce and the compact target “bits,” but also captures the economic aspects of mining through fields like mint reward, total fees, and the overall reward. The tbl_dev_br_blocks serves as a pivotal resource for analyzing the blockchain’s structural and economic dynamics, offering a granular view of each block’s contribution to the ledger.</p>
<table class="table">
<colgroup>
<col style="width: 20%">
<col style="width: 10%">
<col style="width: 69%">
</colgroup>
<thead>
<tr class="header">
<th>col_name</th>
<th>data_type</th>
<th>comment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>bits</td>
<td>string</td>
<td>The encoded form of the target threshold this block’s header hash must be less than or equal to.</td>
</tr>
<tr class="even">
<td>chainwork</td>
<td>string</td>
<td>The total amount of work done on this block’s chain, in hexadecimal.</td>
</tr>
<tr class="odd">
<td>coinbase</td>
<td>string</td>
<td>The transaction containing the miner’s reward and any fees paid by transactions included in this block.</td>
</tr>
<tr class="even">
<td>date</td>
<td>string</td>
<td>The date and time when this block was mined.</td>
</tr>
<tr class="odd">
<td>difficulty</td>
<td>string</td>
<td>The difficulty target for this block.</td>
</tr>
<tr class="even">
<td>hash</td>
<td>string</td>
<td>The hash of this block’s header.</td>
</tr>
<tr class="odd">
<td>height</td>
<td>bigint</td>
<td>The height of this block in the blockchain.</td>
</tr>
<tr class="even">
<td>merkle_root</td>
<td>string</td>
<td>The Merkle root of the transactions included in this block.</td>
</tr>
<tr class="odd">
<td>mint_reward</td>
<td>double</td>
<td>The total amount of new bitcoins generated by mining this block.</td>
</tr>
<tr class="even">
<td>nonce</td>
<td>string</td>
<td>A random number used to try to find a valid block hash.</td>
</tr>
<tr class="odd">
<td>previous_block_hash</td>
<td>string</td>
<td>The hash of the previous block in the blockchain.</td>
</tr>
<tr class="even">
<td>size</td>
<td>bigint</td>
<td>The size of this block in bytes.</td>
</tr>
<tr class="odd">
<td>stripped_size</td>
<td>bigint</td>
<td>The size of this block without witness data in bytes.</td>
</tr>
<tr class="even">
<td>time</td>
<td>timestamp</td>
<td>The Unix timestamp when this block was mined.</td>
</tr>
<tr class="odd">
<td>total_fees</td>
<td>double</td>
<td>The total amount of fees paid by transactions included in this block.</td>
</tr>
<tr class="even">
<td>total_reward</td>
<td>double</td>
<td>The total amount of bitcoins generated by mining this block, including both the mint reward and transaction fees.</td>
</tr>
<tr class="odd">
<td>transaction_count</td>
<td>bigint</td>
<td>The number of transactions included in this block.</td>
</tr>
<tr class="even">
<td>weight</td>
<td>bigint</td>
<td>The weight of this block, used to calculate transaction fees.</td>
</tr>
</tbody>
</table>
</section>
<section id="transactions" class="level2">
<h2 class="anchored" data-anchor-id="transactions">Transactions</h2>
<p><strong>tbl_prod_br_transactions</strong> This table provides a detailed ledger of transactions within the Bitcoin chain, capturing both the technical aspects and the economic activities of each transaction. It records the transaction’s metadata, such as its unique identifier (id), the block_hash it belongs to, its block_height and timing (block_date and block_time), and its placement within the block (index). The table delves into the composition of transactions, detailing the number and total value of inputs (input_count and input_value) and outputs (output_count and output_value), alongside arrays of input and output objects for granular transaction analysis. It also highlights whether a transaction is a coinbase transaction, indicating a miner’s reward (is_coinbase), the transaction fees involved (fee), and technical parameters like hex representation, lock_time, size, version, and virtual_size. This comprehensive transactional overview aids in understanding the flow of bitcoins, transaction costs, and the operational dynamics of the Bitcoin blockchain.</p>
<table class="table">
<colgroup>
<col style="width: 13%">
<col style="width: 8%">
<col style="width: 77%">
</colgroup>
<thead>
<tr class="header">
<th>col_name</th>
<th>data_type</th>
<th>comment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>block_date</td>
<td>date</td>
<td>The date when the block was added to the blockchain</td>
</tr>
<tr class="even">
<td>block_hash</td>
<td>string</td>
<td>The unique identifier of the block</td>
</tr>
<tr class="odd">
<td>block_height</td>
<td>bigint</td>
<td>The height of the block in the blockchain</td>
</tr>
<tr class="even">
<td>block_time</td>
<td>timestamp</td>
<td>The time when the block was added to the blockchain</td>
</tr>
<tr class="odd">
<td>coinbase</td>
<td>string</td>
<td>The address that received the block reward for mining the block</td>
</tr>
<tr class="even">
<td>fee</td>
<td>bigint</td>
<td>The transaction fee paid by the sender</td>
</tr>
<tr class="odd">
<td>hex</td>
<td>string</td>
<td>The hexadecimal representation of the transaction</td>
</tr>
<tr class="even">
<td>id</td>
<td>string</td>
<td>The unique identifier of the transaction</td>
</tr>
<tr class="odd">
<td>index</td>
<td>bigint</td>
<td>The index of the transaction in the block</td>
</tr>
<tr class="even">
<td>input_count</td>
<td>bigint</td>
<td>The number of inputs in the transaction</td>
</tr>
<tr class="odd">
<td>input_value</td>
<td>bigint</td>
<td>The total value of all inputs in the transaction</td>
</tr>
<tr class="even">
<td>inputs</td>
<td>array</td>
<td>An array of input objects containing information about each input in the transaction</td>
</tr>
<tr class="odd">
<td>is_coinbase</td>
<td>boolean</td>
<td>A boolean indicating whether the transaction is a coinbase transaction</td>
</tr>
<tr class="even">
<td>lock_time</td>
<td>bigint</td>
<td>The lock time of the transaction</td>
</tr>
<tr class="odd">
<td>output_count</td>
<td>bigint</td>
<td>The number of outputs in the transaction</td>
</tr>
<tr class="even">
<td>output_value</td>
<td>bigint</td>
<td>The total value of all outputs in the transaction</td>
</tr>
<tr class="odd">
<td>outputs</td>
<td>array</td>
<td>An array of output objects containing information about each output in the transaction</td>
</tr>
<tr class="even">
<td>size</td>
<td>bigint</td>
<td>The size of the transaction in bytes</td>
</tr>
<tr class="odd">
<td>version</td>
<td>bigint</td>
<td>The version number of the transaction</td>
</tr>
<tr class="even">
<td>virtual_size</td>
<td>bigint</td>
<td>The virtual size of the transaction</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="silver-layer" class="level1">
<h1>Silver layer</h1>
<p>The Silver layer on Bitcoin will focus on exploding the inputs and outputs from the raw data as well as focus on all the L2’s, Rollups and Sidechains that are building on Bitcoin</p>
<section id="base-tables" class="level2">
<h2 class="anchored" data-anchor-id="base-tables">Base tables</h2>
<section id="outputs" class="level3">
<h3 class="anchored" data-anchor-id="outputs">Outputs</h3>
<p><strong>vw_prod_sl_outputs</strong> The <code>vw_prod_sl_outputs</code> table is a structured representation of transaction outputs derived from the raw transactional data in the Bronze Layer of the Ortege Lakehouse. This table breaks down the transaction outputs, which are the results of Bitcoin transactions, into a format that is easier to analyze and query.</p>
<table class="table">
<colgroup>
<col style="width: 16%">
<col style="width: 9%">
<col style="width: 74%">
</colgroup>
<thead>
<tr class="header">
<th>col_name</th>
<th>data_type</th>
<th>comment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>id</td>
<td>string</td>
<td>The unique identifier of the transaction from which the output is derived.</td>
</tr>
<tr class="even">
<td>block_height</td>
<td>bigint</td>
<td>The height of the block in the blockchain that includes the transaction.</td>
</tr>
<tr class="odd">
<td>block_date</td>
<td>date</td>
<td>The date when the block containing the transaction was added to the blockchain.</td>
</tr>
<tr class="even">
<td>is_coinbase</td>
<td>boolean</td>
<td>Indicates whether the transaction output is from a coinbase transaction, signifying new bitcoins entering circulation as a miner’s reward.</td>
</tr>
<tr class="odd">
<td>address</td>
<td>string</td>
<td>The Bitcoin address that is the recipient of this output.</td>
</tr>
<tr class="even">
<td>index</td>
<td>bigint</td>
<td>The position of this output within the transaction; the first output is indexed as 0.</td>
</tr>
<tr class="odd">
<td>required_signatures</td>
<td>bigint</td>
<td>The number of signatures required to spend this output.</td>
</tr>
<tr class="even">
<td>script_asm</td>
<td>string</td>
<td>The assembly notation of the script that dictates how this output can be spent.</td>
</tr>
<tr class="odd">
<td>script_hex</td>
<td>string</td>
<td>The hexadecimal encoding of the output script.</td>
</tr>
<tr class="even">
<td>type</td>
<td>string</td>
<td>The type of script used in the transaction output (e.g., ‘pubkeyhash’, ‘scripthash’).</td>
</tr>
<tr class="odd">
<td>value</td>
<td>bigint</td>
<td>The value of bitcoins held in this output, represented in Satoshis (the smallest unit of bitcoin).</td>
</tr>
</tbody>
</table>
</section>
<section id="inputs" class="level3">
<h3 class="anchored" data-anchor-id="inputs">Inputs</h3>
<p><strong>vw_prod_sl_inputs</strong> The <code>vw_prod_sl_inputs</code> table is an expanded view of the inputs from the raw transaction data within the Bronze Layer of the Ortege Lakehouse. This table breaks down individual transaction inputs, providing a granular look at the data that constitutes the transactional elements of the Bitcoin network.</p>
<table class="table">
<colgroup>
<col style="width: 16%">
<col style="width: 8%">
<col style="width: 75%">
</colgroup>
<thead>
<tr class="header">
<th>col_name</th>
<th>data_type</th>
<th>comment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>id</td>
<td>string</td>
<td>The unique identifier for the transaction containing this input.</td>
</tr>
<tr class="even">
<td>block_height</td>
<td>bigint</td>
<td>The height of the block in the blockchain that includes this transaction.</td>
</tr>
<tr class="odd">
<td>block_date</td>
<td>date</td>
<td>The date when the block was added to the blockchain.</td>
</tr>
<tr class="even">
<td>is_coinbase</td>
<td>boolean</td>
<td>A flag indicating whether the input is part of a coinbase transaction.</td>
</tr>
<tr class="odd">
<td>address</td>
<td>string</td>
<td>The Bitcoin address associated with this input.</td>
</tr>
<tr class="even">
<td>index</td>
<td>bigint</td>
<td>The position of this input within the transaction.</td>
</tr>
<tr class="odd">
<td>required_signatures</td>
<td>bigint</td>
<td>The number of required signatures for the transaction this input is part of.</td>
</tr>
<tr class="even">
<td>script_asm</td>
<td>string</td>
<td>The assembly notation of the script used in the input.</td>
</tr>
<tr class="odd">
<td>script_hex</td>
<td>string</td>
<td>The hexadecimal encoding of the script used in the input.</td>
</tr>
<tr class="even">
<td>sequence</td>
<td>bigint</td>
<td>A sequence number associated with this input, used for replacement transactions.</td>
</tr>
<tr class="odd">
<td>spent_output_index</td>
<td>bigint</td>
<td>The index of the output that this input is spending from.</td>
</tr>
<tr class="even">
<td>spent_transaction_hash</td>
<td>string</td>
<td>The hash of the transaction from which this input spends.</td>
</tr>
<tr class="odd">
<td>type</td>
<td>string</td>
<td>The type of script used in this input (e.g., ‘pubkeyhash’, ‘scripthash’).</td>
</tr>
<tr class="even">
<td>value</td>
<td>bigint</td>
<td>The value of bitcoins being input, typically matching the value of the spent output.</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="wallet-transactions" class="level2">
<h2 class="anchored" data-anchor-id="wallet-transactions">Wallet transactions</h2>
<p><strong>tbl_prod_sl_wallet_transactions</strong> The tbl_prod_s1_wallet_transactions table is designed to store transactional data related to Bitcoin wallets. This data helps in monitoring and auditing the balance changes in each wallet associated with the system.</p>
<p>This table is utilized by Ortege to:</p>
<ul>
<li>Track incoming and outgoing transactions for each wallet.</li>
<li>Calculate the real-time balance of each wallet.</li>
<li>Audit transactions for compliance and reporting purposes.</li>
<li>Detect patterns and analyze wallet activity.</li>
</ul>
</section>
<section id="layer-2s" class="level2">
<h2 class="anchored" data-anchor-id="layer-2s">Layer 2’s</h2>
<p>In the blockchain community, terminology such as “layer-2 solutions,” “sidechains,” and “rollups” can often lead to confusion due to overlapping features and capabilities. For the sake of clarity and convenience within our documentation, we will refer to these various technologies collectively as “L2 solutions.” This encompasses any scalability and extensibility solutions that are built on top of the Bitcoin network to enhance its performance and functionality.</p>
<p>Currently, our data platform focuses exclusively on the Stacks L2 solution, which brings smart contract capabilities and decentralized applications to Bitcoin. As an integral part of our data ecosystem, the Stacks-related tables and views provide users with detailed information about transactions and interactions specific to the Stacks blockchain. Our dedication to thorough data representation ensures users have comprehensive insights into this innovative L2, bolstering their understanding and analysis of its growing impact on the Bitcoin network.</p>
<section id="stacks" class="level3">
<h3 class="anchored" data-anchor-id="stacks"><a href="https://www.stacks.co/">Stacks</a></h3>
<p><strong>tbl_prod_sl_l2_stacks</strong> Tracks and catalogues every transaction on the Bitcoin network that pertains to the Stacks Layer-2 solution. This is achieved by scanning for the distinctive “X2” magic code, which is a unique identifier embedded within the OP_RETURN opcode of Bitcoin transaction outputs. The presence of this magic code signals a transaction that is related to the Stacks ecosystem.</p>
<p>Each transaction captured by our table is then systematically classified and decoded. This process transforms the raw data into a structured and user-friendly format, thereby allowing our users to effortlessly discern the nature and details of Stacks-related activities taking place on the Bitcoin blockchain.</p>
<p>The table serves as a powerful tool for users who are interested in monitoring the interactions between Bitcoin and the Stacks L2 solution.</p>
<table class="table">
<colgroup>
<col style="width: 60%">
<col style="width: 39%">
</colgroup>
<thead>
<tr class="header">
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>id</code></td>
<td>Represents the transaction hash.</td>
</tr>
<tr class="even">
<td><code>block_height</code></td>
<td>The block height the transaction occurred in.</td>
</tr>
<tr class="odd">
<td><code>block_date</code></td>
<td>The date the transaction occurred.</td>
</tr>
<tr class="even">
<td><code>address</code></td>
<td>Address of the sender.</td>
</tr>
<tr class="odd">
<td><code>index</code></td>
<td>The sequence number of the output in a transaction, starting at 0.</td>
</tr>
<tr class="even">
<td><code>script_asm</code></td>
<td>The script of the transaction. An <code>OP_RETURN</code> followed by specific codes at index 0 indicates a non-spendable output embedding different types of data.</td>
</tr>
<tr class="odd">
<td><code>value</code></td>
<td>The amount associated with the output, typically zero for <code>OP_RETURN</code> outputs as they are not intended for transfer.</td>
</tr>
<tr class="even">
<td><code>transaction_type</code></td>
<td>- <code>vrf</code> - VRF key registrations relating to <code>OP_RETURN 58325e</code> (<code>X2^</code>). - <code>commit</code> - Transactions relating to <code>OP_RETURN 58325b</code> (<code>X2[</code>): Block commit. Every output after the index 0, represents an amount that the Stacks miner commits in Satoshi’s to be paid to Stacks stackers. The final transaction is the unspent change to send back to the miner. - <code>stack-stx</code> - Transaction relating to <code>OP_RETURN 583278</code> (<code>X2x</code>). - <code>transfer-stx</code> - Transactions relating <code>OP_RETURN 583224</code> (<code>X2$</code>). - <code>preSTX</code> - Transactions relating to <code>OP_RETURN 583270</code> (<code>X2p</code>).</td>
</tr>
<tr class="odd">
<td><code>commit</code></td>
<td>A boolean reflecting true if the value is an amount of Satoshi’s committed to STX miners.</td>
</tr>
<tr class="even">
<td><code>burnt</code></td>
<td>Highlights transactions that send BTC to the burn address <code>1111111111111111111114oLvT2</code>, indicating that miners burn BTC.</td>
</tr>
<tr class="odd">
<td><code>commit_details</code></td>
<td>Contains details related to the proof-of-transfer commitment. The <code>commit_details</code> structure includes the following fields: <code>block_hash</code>: The hash of the corresponding block in the Bitcoin blockchain. <code>parent_block</code>: The hash of the parent Bitcoin block. <code>parent_txoff</code>: The transaction offset in the parent block. <code>key_block</code>: The hash of the key block for leader election in Stacks. <code>key_txoff</code>: The transaction offset in the key block. <code>burn_modulus</code>: The modulus for the burn amount.</td>
</tr>
<tr class="even">
<td><code>stack_stx_details</code></td>
<td>Contains details about the STX tokens locked for Stacks mining. The <code>stack_stx_details</code> structure encompasses: <code>uSTX_to_lock</code>: The amount of microSTX (uSTX) tokens that are locked. <code>cycles</code>: The number of cycles for which the tokens are locked.</td>
</tr>
</tbody>
</table>
</section>
<section id="stacks-rewards" class="level3">
<h3 class="anchored" data-anchor-id="stacks-rewards">Stacks Rewards</h3>
<p><strong>tbl_prod_sl_l2_stacks_rewards</strong> Captures the rewards earned by Stacks (STX) token stackers, expressed in satoshis, which is the smallest unit of Bitcoin. It logs the unique identifier of the reward transaction (id), the block height at which the reward was recorded (block_height), the date of the block (block_date), the recipient address (address), and the amount of the reward (input_value).</p>
<table class="table">
<colgroup>
<col style="width: 14%">
<col style="width: 15%">
<col style="width: 70%">
</colgroup>
<thead>
<tr class="header">
<th>Column Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>id</td>
<td>Integer</td>
<td>The unique identifier for the stacking reward record.</td>
</tr>
<tr class="even">
<td>block_height</td>
<td>Integer</td>
<td>The height of the block in the Stacks blockchain.</td>
</tr>
<tr class="odd">
<td>block_date</td>
<td>Date</td>
<td>The date when the block was mined.</td>
</tr>
<tr class="even">
<td>address</td>
<td>String</td>
<td>The Stacks wallet address that received the reward.</td>
</tr>
<tr class="odd">
<td>value</td>
<td>Float</td>
<td>The reward amount earned for stacking, denominated in satoshis.</td>
</tr>
<tr class="even">
<td>commit</td>
<td>Boolean</td>
<td>Indicates whether the row is an actual BTC committment</td>
</tr>
<tr class="odd">
<td>burnt</td>
<td>Boolean</td>
<td>Indicates whether the transaction was sent to the burn address</td>
</tr>
<tr class="even">
<td>cycle</td>
<td>Integer</td>
<td>The cycle the transaction occurred in</td>
</tr>
<tr class="odd">
<td>avg_btc_price</td>
<td>Float</td>
<td>The average of the BTC price for the duration of the Stacks cylce</td>
</tr>
<tr class="even">
<td>usd_committed</td>
<td>Float</td>
<td>The value mulitplied by the average BTC price to determine the amount of USD committed for rewards</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="metaprotocols" class="level2">
<h2 class="anchored" data-anchor-id="metaprotocols">MetaProtocols</h2>
<p>Bitcoin metaprotocols, such as Ordinals and BRC-20 tokens, represent innovative layers or protocols built on top of the Bitcoin blockchain that extend its functionality beyond simple financial transactions. These metaprotocols leverage the security and decentralization of Bitcoin while introducing new capabilities, such as the creation of smart contracts, tokens, and unique digital assets.</p>
<section id="ordinals" class="level3">
<h3 class="anchored" data-anchor-id="ordinals">Ordinals</h3>
<p><strong>tbl_prod_sl_ordinals</strong> Ordinals introduce the concept of “digital artifacts” to the Bitcoin ecosystem. Unlike traditional Bitcoin transactions that are purely financial, Ordinals allow for the inscription of arbitrary data directly onto individual satoshis (the smallest unit of Bitcoin). This innovation means that any piece of digital content, whether it be text, images, audio, or even small programs, can be inscribed onto the Bitcoin blockchain. Each inscribed satoshi becomes a unique, non-fungible token (NFT) due to its specific ordinal number, making it possible to own, trade, and collect digital artifacts in a way that’s secured by the Bitcoin network.</p>
<p><strong>Key Features:</strong></p>
<ul>
<li>Uniqueness: Each inscription is unique, tied to a specific satoshi.</li>
<li>Decentralization: Utilizes the secure and decentralized nature of Bitcoin.</li>
<li>Versatility: Allows for a wide range of digital content to be stored directly on the blockchain.</li>
</ul>
</section>
<section id="brc20s" class="level3">
<h3 class="anchored" data-anchor-id="brc20s">BRC20’s</h3>
<p><strong>tbl_prod_sl_brc20</strong> BRC-20 tokens represent a standard for issuing fungible tokens on the Bitcoin blockchain, analogous to Ethereum’s ERC-20 standard. By utilizing Bitcoin sidechains or layers such as the Liquid Network or smart contract platforms built on top of Bitcoin, BRC-20 tokens enable the creation of custom tokens that can represent various assets, from traditional securities to new forms of digital assets. These tokens can be used for a multitude of purposes, including decentralized finance (DeFi), governance, and digital collectibles, all while benefiting from the security and liquidity of the Bitcoin network.</p>
<p><strong>Key Features:</strong></p>
<ul>
<li>Fungibility: Tokens conforming to the BRC-20 standard are interchangeable, with each token being identical to another in value and properties.</li>
<li>Smart Contracts: Enables complex financial operations and agreements to be executed automatically.</li>
<li>Bitcoin Security: Leverages the robust security features of the Bitcoin blockchain.</li>
</ul>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/Ortege-xyz\.github\.io\/docs\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>